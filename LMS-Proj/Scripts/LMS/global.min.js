function autoblur() { $("a").mouseup(function () { $(this).blur() }) } function toggle(t, i) { return $("#" + t).is(":hidden") ? ($("#" + t).slideDown(800), scrollPage(t, i)) : $("#" + t).slideUp(600), !1 } function scrollPage(t, i) { d = $("#" + t).offset().top + i - ($(window).height() + $(window).scrollTop()), d > 30 && $("html, body").animate({ scrollTop: "+=" + d + "px" }, 1e3) } function emil() { $("a.emil").each(function () { for (hrf = $(this).attr("href"), key = hrf.charAt(hrf.indexOf("adr=") + 4), b = hrf.indexOf("&"), 0 > b && (b = hrf.length), a = unescape(hrf.substring(hrf.indexOf("adr=") + 5, b)), e = "", i = 0; i < a.length; i++) e += String.fromCharCode(a.charCodeAt(i) - key); $(this).replaceWith('<a href="mailto:' + e + '">' + e + "</a>") }) } function autolink() { $("ul.bl-list div, ul.bl-list-small div, ul.bl-misc li.promo div, ul.bl-misc li.companion div, ol.listing li, .tabpage ol li div").unbind("click").click(function (t) { var i = null; i = $(this).find("a.mainlink").attr("href"), i && (document.location.href = i) }), $("ul.bl-1big div, ul.bl-list2 div").unbind("click").click(function (t) { var i = null; i = $(this).find("a.mainlink").attr("href"), i && $(this).height() < 90 && (document.location.href = i) }), $(".slides > li[data-url]").click(function (t) { document.location.href = $(this).attr("data-url") }), $(".tabs ol li div").unbind("click").click(function (t) { t.preventDefault(); var i = null; i = $(this).find("a.mainlink").attr("href"), i && $(window).width() >= 750 ? $(this).closest("li").hasClass("current") || ($(this).closest("ol").find("li").removeClass("current"), $(this).closest("div.tabs").removeClass("bg-col2 bg-col8 bg-col10 bg-col13"), $(this).closest("div.tabs").addClass($(this).closest("li").attr("class")), $(this).closest("li").addClass("current"), act = "tabs", pageurl = $(this).closest("li").find("a").attr("href"), vars = { act: act }, dest = $(this).closest("div.tabs").attr("data-tab-id"), getajax()) : document.location.href = i }), $("li.nopasslink a").unbind("click").click(function (t) { t.preventDefault(), a = $(this).parent().parent().parent().parent(), $(this).hide(), a.parent().find("div.alert").slideUp(600), a.find("p").slideDown(600), a.find("ol li:eq(0)").removeClass("alert").addClass("wide"), $(window).width() >= 480 ? a.find("ol li:eq(1)").hide() : a.find("ol li:eq(1)").slideUp(600), a.find("ol li.button").hide(), a.find("ol li.button.nopass").show() }), $("a.playstart").unbind("click").click(function (t) { t.preventDefault(), url = $(this).attr("href"), $(window).width() <= 600 && (url += "?id=p007"), document.location.href = url }), $("div.navtop a, div.topbar h1 span").unbind("click").click(function (t) { t.preventDefault(), toggle("navtop", 300), $(window).width() < 700 && $("#nav").slideUp(600, function () { $("header div.nav").removeClass("open") }) }), $("header div.nav a").unbind("click").click(function (t) { t.preventDefault(), d = $(this).closest("div"), $("#nav").is(":hidden") ? (d.addClass("open"), $("#nav").slideDown(800)) : $("#nav").slideUp(600, function () { d.removeClass("open") }) }), $("#nav span").unbind("click").click(function (t) { t.preventDefault(), $("#nav ul ul").slideUp(700), $("#nav span").removeClass("active"), $(this).next().is(":hidden") ? ($(this).next().slideDown(700, function () { $("#nav > ul > li").removeClass("current") }), $(this).addClass("active")) : $("#nav > ul > li").removeClass("current") }), $("a.dialog-info, a.cancel").unbind("click").click(function (t) { t.preventDefault(), dialog(!0, $(this)) }), $("p.tbl-showmore a").unbind("click").click(function (t) { t.preventDefault(), act = "dates", pageurl = $(this).closest("div.tbl").attr("data-url"), vars = { act: act, pos: $(this).attr("data-pos") }, dest = $(this).closest("div.tbl").find("tbody:last"), showloading("calendar", $(this)), window.setTimeout("getajax()", 1e3) }) } function tabstogglediv() { $(".tabs-toggle-div ul li a").unbind("click").click(function (t) { if (t.preventDefault(), !$(this).hasClass("current")) { var i = $(this).closest("div"); i.find("a").removeClass("current"), $(this).addClass("current"), i.parent().find("div.alert, div.notice").slideUp(600), i.find("li").each(function (t) { $(this).find("a").hasClass("current") && (i_curr = t) }), i.parent().children("div.tabpage").addClass("hidden"), curr_div = i.parent().children("div.tabpage").eq(i_curr), curr_div.removeClass("hidden"), curr_div.find("p.hideme").hide(), curr_div.find("ol li:eq(0)").removeClass("wide"), curr_div.find("ol li:eq(1), ol li.button, ol li.nopasslink a").show(), curr_div.find("ol li.button.nopass").hide() } }) } function autotrailer() { $("a[data-trailer-id]").unbind("click").click(function (t) { if (t.preventDefault(), $(this).find("img").width() > 200 && $(this).attr("data-trailer-id")) { var i = $(this).attr("data-trailer-attr"); i || (i = "autoplay=1&showinfo=0&vq=medium"), $(this).prepend(tcode + $(this).attr("data-trailer-id") + "?" + i + tcode2), $(this).children("em").hide(), $(this).attr("data-trailer-id", "") } }), $(".slides > li[data-trailer-id]").unbind("click").click(function (t) { disablebar(), $(".flexslider").length && $(".flexslider").flexslider("stop"), tint(!0); var i = $(this).attr("data-trailer-attr"); i || (i = "autoplay=1&showinfo=0", i += $(window).width() >= 750 ? "&vq=hd720" : "&vq=medium"), $("body").append('<div id="boxed"><div><a href="#" class="button">StÃ¤ng</a>' + tcode + $(this).attr("data-trailer-id") + "?" + i + tcode2 + "</div></div>"), $("#tint, #boxed a.button").unbind("click").click(function (t) { t.preventDefault(), $("#boxed").remove(), tint(!1) }) }) } function initloading(t) { $("div#loading").remove(), content = '<div id="loading"><div></div></div>', t ? $(t).append(content) : $("body").append(content) } function showloading(t, i) { xpos = 0, ypos = 0, $("div#loading div").css({ backgroundPosition: "0px 0px" }), "basket" == t || "calendar" == t ? (tblpos = i.parent().parent().offset(), xpos = i.parent().parent().width() / 2 + tblpos.left - 45, ypos = i.offset(), ypos = ypos.top, "calendar" == t && (ypos -= 50), initloading(!1), $("div#loading").show().offset({ top: ypos, left: xpos }), $("body").append('<div id="loading-tint"></div>')) : "windowed" == t && ($("div#loading").show(), initloading(i)), timerPos = 0, clearInterval(timerID), timerID = setInterval("timeranim()", 65) } function hideloading() { clearInterval(timerID), $("div#loading, div#loading-tint").remove() } function timeranim() { timerPos -= 48, $(".gecko div#loading div").css({ backgroundPosition: timerPos + "px 0px" }), $("div#loading div").css({ backgroundPositionX: timerPos + "px" }), -528 >= timerPos && (timerPos = 0) } function tint(t) { t ? $("#tint").length || $("body").append('<div id="tint"></div>') : $("body #tint").remove() } function dialog(i, e) { i ? (dArr.length = 0, dArr = e.attr("data-dialog").split(";"), tint(!0)) : dArr[0] = e, content = "", dialogoffset = 15, ("add" == dArr[0] || "add-complete" == dArr[0]) && (content = "<em></em>"), ("add-complete" == dArr[0] || "delete" == dArr[0] || "info" == dArr[0] || "cancel" == dArr[0]) && ("info" == dArr[0] ? (content += dArr[1], but = " close", dialogoffset = 0) : (content += "<h2>" + dArr[1] + "</h2>", but = ""), content += '<div><ul class="buttons two-a-side group"><li><a href="#" class="button' + but + '">' + dArr[2] + "</a></li>", "0" != dArr[3] && (content += '<li><a href="#" class="button green">' + dArr[3] + "</a></li>"), content += "</ul></div>"), $("#dialog").length ? $("#dialog > div").html(content) : $("body").append('<div id="dialog"><div>' + content + "</div></div>"), $("div#dialog > div").css("margin-top", "-" + parseInt($("div#dialog > div").height()) - dialogoffset + "px"), "add" == dArr[0] ? showloading("windowed", $("#dialog > div")) : ($("#dialog a.button, #tint").unbind("click").click(function (t) { t.preventDefault(), tint(!1), $("#dialog").remove(), prtic && prtic.val() < 1 && prtic.val(1) }), $("#dialog a.button.green").unbind("click").click(function (i) { i.preventDefault(), tint(!1), $("#dialog").remove(), "add-complete" == dArr[0] || "cancel" == dArr[0] ? document.location.href = dArr[4] : "delete" == dArr[0] && (t = e.closest("div.tbl-basket"), act = "delete", pageurl = t.attr("data-url"), vars = { act: act, pid: e.closest("tbody").attr("data-id") }, dest = t.attr("id") + " table", showloading("basket", e), e.closest("tbody").fadeOut(1e3, function () { getajax() })) }), "add-complete" == dArr[0] && "addc" == act && (dest2.replaceWith(dta[1]), checkout(), autolink())) } function checkout() { $("#basket a.order.empty").unbind("click").click(function (t) { t.preventDefault() }), $(".buttons a.basket").unbind("click").click(function (t) { t.preventDefault(), dialog(!0, $(this)), act = "add", pageurl = $("#basket").attr("data-url"), vars = { act: act, pid: $(this).attr("data-id") }, dest = "basket", getajax() }), $(".tbl a.basket").unbind("click").click(function (t) { t.preventDefault(), dialog(!0, $(this)), act = "addc", pageurl = $("#basket").attr("data-url"), vars = { act: act, pid: $(this).attr("data-id") }, dest = "basket", dest2 = $(this).closest("tbody"), getajax() }), $("a.basket.delete").unbind("click").click(function (t) { t.preventDefault(), dialog(!0, $(this)) }), $("a.basket.deal").unbind("click").click(function (i) { i.preventDefault(), t = $(this).closest("div.tbl-basket"), act = "deal", pageurl = t.attr("data-url"), vars = { act: act, dealcode: $(this).parent().find("input").val() }, dest = t.attr("id") + " table", showloading("basket", $(this)), $(this).closest("div").fadeOut(1e3, function () { getajax() }) }), $(".tbl-basket input[type=checkbox]").unbind("click").click(function (i) { t = $(this).closest("div.tbl-basket"), act = "ticket", pageurl = t.attr("data-url"), vars = { act: act, pid: $(this).closest("tbody").attr("data-id") }, dest = t.attr("id") + " table", showloading("basket", $(this)), window.setTimeout("getajax()", 1e3) }), $("form h4 input[type=checkbox]").unbind("click").click(function (t) { ths = $(this), ths.is(":checked") ? (infoArr = ths.attr("data-userinfo").split(";"), $.each(infoArr, function (t, i) { null != i && i.length > 0 && ths.closest("h4").next().find("li").eq(t).find("input").val(i).attr("disabled", "disabled") })) : ths.closest("h4").next().find("li input").val("").removeAttr("disabled") }), $(".tbl-basket input[type=number]").change(function (t) { prtic = $(this), participants($(this)) }), $("a.basket.add").unbind("click").click(function (t) { t.preventDefault(), prtic = $(this).closest("td").find("input"), prtic.val(parseInt(prtic.val()) + 1), participants($(this)) }), $("a.basket.rem").unbind("click").click(function (t) { t.preventDefault(), prtic = $(this).closest("td").find("input"), prtic.val(parseInt(prtic.val()) - 1), participants($(this)) }) } function participants(e) { prtic.val() < 1 ? e.closest("tbody").find("a.basket.delete")[0].click() : (i = prtic.val(), i > 50 && (i = 50, prtic.val(i)), t = e.closest("div.tbl-basket"), act = "participants", pageurl = t.attr("data-url"), vars = { act: act, pid: e.closest("tbody").attr("data-id"), nb: i }, dest = t.attr("id") + " table", showloading("basket", e), window.setTimeout("getajax()", 1e3)) } function getajax() { a = "", window.location.pathname.indexOf("templates") >= 0 && (a = "data-"), $.extend(vars, { rnd: Math.random(), ajax: "true" }); var t = $.get(a + pageurl, vars).done(function (t) { "add" == act || "addc" == act ? ("addc" == act ? (dta = t.split(";;"), $("#" + dest).html(dta[0])) : $("#" + dest).html(t), $("#basket em").delay(700).fadeIn(10, function () { dialog(!1, "add-complete") }).delay(500).fadeOut(300).fadeIn(10).fadeOut(300).fadeIn(10).fadeOut(300).fadeIn(10)) : "delete" == act || "participants" == act ? ($("#" + dest).html(t), hideloading(), checkout(), $("#" + dest + " p").length && $("#" + dest + " + ul.buttons a.button.green").hide(), act = "refresh", pageurl = $("#basket").attr("data-url"), vars = { act: act }, dest = "basket", getajax()) : "deal" == act || "ticket" == act ? ($("#" + dest).html(t), hideloading(), checkout()) : "dates" == act ? (dta = t.split(";;"), $(dest).after(dta[1]), dta[0].length > 1 ? $(".tbl-showmore").html(dta[0]) : $(".tbl-showmore").remove(), hideloading(), checkout(), autolink()) : "tabs" == act ? ($("#" + dest).html(t), autolink()) : $("#" + dest).html(t) }).fail(function () { hideloading(), alert("Ett fel uppstod.") }) } function blockheight() { ua = uaInfo.getBrowser(), -1 == ua[0].indexOf("firefox") && -1 == ua[0].indexOf("ie8") && (blockheighttrigger(), $(window).load(function () { blockheighttrigger() }), $(window).resize(function () { setTimeout("blockheighttrigger()", 100) })) } function blockheighttrigger() { blockadjust("ul.block.bl-1big", " > li", $(window).width() >= 750, 3, !1), blockadjust("ul.block.bl-list2", " > li", $(window).width() >= 750, 3, !1), blockadjust("article .content ul.block", " > li", $(window).width() >= 750, 2, !1), blockadjust("div > aside ul.block.bl-misc", " > li.promo", $(window).width() >= 750 && $(window).width() < 970, 3, !1), blockadjust("ul.block.bl-promobig", " > li", $(window).width() >= 754 && $(window).width() < 972, 2, !1), blockadjust(".s-norm ul.block.bl-promobig", " > li", $(window).width() >= 972, 2, !0), blockadjust(".s-norm + aside ul.block.bl-misc", " > li", $(window).width() >= 754 && $(window).width() < 972, 3, !1), blockadjust(".s-wide ul.block.bl-promobig", " > li", $(window).width() >= 972, 3, !0), blockadjust(".s-wide ul.block.bl-promobig", " > li:nth-child(n+3)", $(window).width() >= 754 && $(window).width() < 972, 3, !0), blockadjust(".s-wide ul.block.bl-promobig", " > li:nth-child(n+4)", $(window).width() >= 972, 4, !0) } function blockadjust(t, i, e, a, n) { var l = $(t + i + " > div > div"); if (e) { if ($(t).length) { var d = 0, o = 0, s = $(t + i).length; $(l).css("min-height", "inherit"), $(l).each(function (e) { if (o++, hc = Math.floor($(this).height()), hc > d && (d = hc), o == a || e == s - 1) { for (var n = 0; o > n; n++) $(t + i).eq(e - n).find(" > div > div").css("min-height", d + "px"); o = 0, d = 0 } }) } } else n || $(l).css("min-height", "inherit") } function initflexslider() { $(".flexslider").length && ($(".flexslider ul li").length <= 1 && $(".js .flex-viewport-single").css("display", "inline-block"), $(window).load(function () { $(".js .flexslider .slides li").css("visibility", "visible") }), $(".flexslider").flexslider($(window).width() >= 768 ? { animation: "slide", slideshowSpeed: 6958, animationSpeed: 1e3, initDelay: 0, keyboard: !1, controlsContainer: ".ctrls", start: function (t) { t.count > 1 && ($(".ctrls").show(), $(".ctrls li a").hover(function () { $(this).not(".flex-active").addClass("flex-hover") }, function () { $(this).removeClass("flex-hover") }), navigator.userAgent.match(/iPad/i) && $(".ctrls, .slides li").bind("touchstart", function (i) { disablebar(), t.pause() }), $(".ctrls").click(function (i) { disablebar(), t.pause() }), progressbar(), $(window).blur(function () { clearInterval(timerID) })) }, before: function (t) { setTimeout("progressbar()", 100) }, after: function (t) { } } : { animation: "slide", slideshow: !1, keyboard: !1, controlsContainer: ".ctrls", start: function (t) { t.count > 1 && $(".ctrls").show(), disablebar() }, before: function (t) { setTimeout("progressbar()", 100) } })) } function disablebar() { animbar = !1, clearInterval(timerID), $(".flex-control-paging li a").css({ backgroundPosition: "0px -980px" }).removeClass("flex-hover"), $(".flex-control-paging li a.flex-active").css({ backgroundPosition: "0px 0px" }) } function progressbar() { timerPos = 0, clearInterval(timerID), $(".flex-control-paging li a").css({ backgroundPosition: "0px -980px" }), animbar ? timerID = setInterval("timeranim()", 142) : $(".flex-control-paging li a.flex-active").css({ backgroundPosition: "0px 0px" }) } function timeranim() { timerPos -= 20, $(".gecko .flex-control-paging li a.flex-active").css({ backgroundPosition: "0px " + timerPos + "px" }), $(".flex-control-paging li a.flex-active").css({ backgroundPositionY: timerPos + "px" }).removeClass("flex-hover") } !function (t) { function i() { d.setAttribute("content", r), c = !0 } function e() { d.setAttribute("content", s), c = !1 } function a(a) { b = a.accelerationIncludingGravity, u = Math.abs(b.x), h = Math.abs(b.y), f = Math.abs(b.z), t.orientation && 180 !== t.orientation || !(u > 7 || (f > 6 && 8 > h || 8 > f && h > 6) && u > 5) ? c || i() : c && e() } var n = navigator.userAgent; if (/iPhone|iPad|iPod/.test(navigator.platform) && /OS [1-5]_[0-9_]* like Mac OS X/i.test(n) && n.indexOf("AppleWebKit") > -1) { var l = t.document; if (l.querySelector) { var d = l.querySelector("meta[name=viewport]"), o = d && d.getAttribute("content"), s = o + ",maximum-scale=1", r = o + ",maximum-scale=10", c = !0, u, h, f, b; d && (t.addEventListener("orientationchange", i, !1), t.addEventListener("devicemotion", a, !1)) } } }(this), $(document).ready(function () { emil(), autoblur(), autolink(), autotrailer(), blockheight(), tabstogglediv(), initloading(!1), checkout(), initflexslider(), "function" == typeof window.initialize && initialize() }), /mobi/i.test(navigator.userAgent) && !window.location.hash && window.addEventListener && (window.addEventListener("load", function () { window.pageYOffset || window.scrollTo(0, 0) }), window.addEventListener("orientationchange", function () { window.pageYOffset < 100 && window.scrollTo(0, 0) })), jQuery.easing.jswing = jQuery.easing.swing, jQuery.extend(jQuery.easing, { def: "easeInOutExpo", swing: function (t, i, e, a, n) { return jQuery.easing[jQuery.easing.def](t, i, e, a, n) }, easeInOutExpo: function (t, i, e, a, n) { return 0 == i ? e : i == n ? e + a : (i /= n / 2) < 1 ? a / 2 * Math.pow(2, 10 * (i - 1)) + e : a / 2 * (-Math.pow(2, -10 * --i) + 2) + e }, easeInOutCubic: function (t, i, e, a, n) { return (i /= n / 2) < 1 ? a / 2 * i * i * i + e : a / 2 * ((i -= 2) * i * i + 2) + e } }); var tcode = '<div class="player"><iframe src="http://www.youtube.com/embed/', tcode2 = '&color=red&rel=0&ap=%2526fmt%3D22" seamless frameborder="0"></iframe></div>', timerID = null, timerPos = null, dArr = new Array, ths = null, prtic = null, act = null, pageurl = null, vars = null, dest = null, dest2 = null, req = null, dta = null, timerID = null, barpos = -50, animbar = !0, activeslider = null;